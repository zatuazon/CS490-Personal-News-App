<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>User Settings</title>
        <link rel="stylesheet" href="login.css">
        <script src="https://kit.fontawesome.com/8b7e183f58.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="container">
            <input type="checkbox" id="flip">
                <div class="cover">
                    <div class="front">
                        <img src="backimg2.jpeg" alt="">
                        <div class="text">
                            <span class="text-1">Need a change?</span>
                            <span class="text-2">Let us help.</span>
                        </div>
                    </div>
                </div>
                <div class="forms">
                    <div class="form-content">
                    
                        <div class="signup-form">
                            <div class="title">User Settings</div>
                    <div class="form-content">
                        <div class="input-boxes">
                            <div class="input-box">
                                <i class="fas fa-user"></i>
                                <input type="text" id="first_name" placeholder="First Name" >
                            </div>
                            <div class="input-box">
                                
                                <input type="text" id="last_name" placeholder="Last Name" >
                            </div>
                            <div class="input-box">
                                <i class="fas fa-user-tie"></i>
                                <input type="text" id="username" placeholder="Username" >
                            </div>
                            <div class="input-box">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="email" placeholder="Email" >
                            </div>
                            <br>
                            <div class="text"><a href="forgot.html">Need a new password?</a></div>
                            <br>
                            <div class = "news-preference">
                                <div class="title">News Preference</div><br>
                                
                            
                                    <input type="checkbox" >
                                    <label for="business">Business</label><br>
                                    <input type="checkbox" >
                                    <label for="entertainment">Entertainment</label><br>
                                    <input type="checkbox" >
                                    <label for="health">Health</label><br>
                                    <input type="checkbox" >
                                    <label for="general">General</label><br>
                                    <input type="checkbox" >
                                    <label for="science">Science</label><br>
                                    <input type="checkbox" >
                                    <label for="sports">Sports</label><br>
                                    <input type="checkbox" >
                                    <label for="technology">Technology</label><br>
                                    
                                
                            </div>
                            <div class="button input-box">
                                <input id=saveData type=submit>
                            </div>
                            
						</div>
                    </div>
                    </div>
                </div>
        </div>
	

       
      <div class ="output" id="output">
        
    
  
      </div>
    </body>
   
   

      <!-- The core Firebase JS SDK is always required and must be listed first -->
      <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

      <!-- TODO: Add SDKs for Firebase products that you want to use
           https://firebase.google.com/docs/web/setup#available-libraries -->
      <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
      <script>
 
    const firebaseConfig = {
    apiKey: "AIzaSyCSQXSf0quje5JxYFKBRRbLG2SCp7ymFYM",
    authDomain: "news-9646a.firebaseapp.com",
    projectId: "news-9646a",
    storageBucket: "news-9646a.appspot.com",
    messagingSenderId: "798864065224",
    appId: "1:798864065224:web:7bfe4c8df0751c0950dbfd"
  };


  firebase.initializeApp(firebaseConfig);
  // init variables
  const auth = firebase.auth()
  const database = firebase.database()
  //global user
  let user = null

  auth.onAuthStateChanged((u) => {
    user = u
    
  })

    saveData.addEventListener('click',(e) => {
    var first_name = document.getElementById('first_name').value;
    var last_name = document.getElementById('last_name').value;
    var username = document.getElementById('username').value;
    var email = document.getElementById('email').value
    
    
  var user_data = {
        email : email,
		first_name : first_name,
		last_name : last_name,
		username : username,
        last_login : Date.now()
  };

  const updates = {};
  updates['/users/' + user.uid] = user_data;

  return firebase.database().ref().update(updates);
  alert('updated');
});
</script>

</html>
